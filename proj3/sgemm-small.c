#include <emmintrin.h>void sgemm( int m, int n, float *A, float *C ) {    if (m == 60 && n == 60) {	__m128 c[15],at,a[15];	for( int j = 0; j < m; j++) {	    float* temp1 = C+j*m;	    c[0] = _mm_loadu_ps(temp1 + 0);	    c[1] = _mm_loadu_ps(temp1 + 4);	    c[2] = _mm_loadu_ps(temp1 + 8);	    c[3] = _mm_loadu_ps(temp1 + 12);	    c[4] = _mm_loadu_ps(temp1 + 16);	    c[5] = _mm_loadu_ps(temp1 + 20);	    c[6] = _mm_loadu_ps(temp1 + 24);	    c[7] = _mm_loadu_ps(temp1 + 28);	    c[8] = _mm_loadu_ps(temp1 + 32);	    c[9] = _mm_loadu_ps(temp1 + 36);	    c[10] = _mm_loadu_ps(temp1 + 40);	    c[11] = _mm_loadu_ps(temp1 + 44);	    c[12] = _mm_loadu_ps(temp1 + 48);	    c[13] = _mm_loadu_ps(temp1 + 52);	    c[14] = _mm_loadu_ps(temp1 + 56);	    for( int k = 0; k < n; k+=1 ) {		at = _mm_set1_ps(A[j+k*m]);		a[0] = _mm_loadu_ps(A+k*m+0);		a[0] = _mm_mul_ps(a[0],at);		c[0] = _mm_add_ps(a[0],c[0]);		a[1] = _mm_loadu_ps(A+k*m+4);		a[1] = _mm_mul_ps(a[1],at);		c[1] = _mm_add_ps(a[1],c[1]);		a[2] = _mm_loadu_ps(A+k*m+8);		a[2] = _mm_mul_ps(a[2],at);		c[2] = _mm_add_ps(a[2],c[2]);		a[3] = _mm_loadu_ps(A+k*m+12);		a[3] = _mm_mul_ps(a[3],at);		c[3] = _mm_add_ps(a[3],c[3]);		a[4] = _mm_loadu_ps(A+k*m+16);		a[4] = _mm_mul_ps(a[4],at);		c[4] = _mm_add_ps(a[4],c[4]);		a[5] = _mm_loadu_ps(A+k*m+20);		a[5] = _mm_mul_ps(a[5],at);		c[5] = _mm_add_ps(a[5],c[5]);		a[6] = _mm_loadu_ps(A+k*m+24);		a[6] = _mm_mul_ps(a[6],at);		c[6] = _mm_add_ps(a[6],c[6]);		a[7] = _mm_loadu_ps(A+k*m+28);		a[7] = _mm_mul_ps(a[7],at);		c[7] = _mm_add_ps(a[7],c[7]);		a[8] = _mm_loadu_ps(A+k*m+32);		a[8] = _mm_mul_ps(a[8],at);		c[8] = _mm_add_ps(a[8],c[8]);		a[9] = _mm_loadu_ps(A+k*m+36);		a[9] = _mm_mul_ps(a[9],at);		c[9] = _mm_add_ps(a[9],c[9]);		a[10] = _mm_loadu_ps(A+k*m+40);		a[10] = _mm_mul_ps(a[10],at);		c[10] = _mm_add_ps(a[10],c[10]);		a[11] = _mm_loadu_ps(A+k*m+44);		a[11] = _mm_mul_ps(a[11],at);		c[11] = _mm_add_ps(a[11],c[11]);		a[12] = _mm_loadu_ps(A+k*m+48);		a[12] = _mm_mul_ps(a[12],at);		c[12] = _mm_add_ps(a[12],c[12]);		a[13] = _mm_loadu_ps(A+k*m+52);		a[13] = _mm_mul_ps(a[13],at);		c[13] = _mm_add_ps(a[13],c[13]);		a[14] = _mm_loadu_ps(A+k*m+56);		a[14] = _mm_mul_ps(a[14],at);		c[14] = _mm_add_ps(a[14],c[14]);	    }	    _mm_storeu_ps(temp1+0,c[0]);	    _mm_storeu_ps(temp1+4,c[1]);	    _mm_storeu_ps(temp1+8,c[2]);	    _mm_storeu_ps(temp1+12,c[3]);	    _mm_storeu_ps(temp1+16,c[4]);	    _mm_storeu_ps(temp1+20,c[5]);	    _mm_storeu_ps(temp1+24,c[6]);	    _mm_storeu_ps(temp1+28,c[7]);	    _mm_storeu_ps(temp1+32,c[8]);	    _mm_storeu_ps(temp1+36,c[9]);	    _mm_storeu_ps(temp1+40,c[10]);	    _mm_storeu_ps(temp1+44,c[11]);	    _mm_storeu_ps(temp1+48,c[12]);	    _mm_storeu_ps(temp1+52,c[13]);	    _mm_storeu_ps(temp1+56,c[14]);	}    } else {	__m128 at[3],c[5],a[15];	for( int j = 0; j < m; j++){	    for( int k = 0; k < n/2*2; k+=2){		at[0] = _mm_set1_ps(*(A+j+k*m));		at[1] = _mm_set1_ps(*(A+j+(k+1)*m));		at[2] = _mm_set1_ps(*(A+j+(k+2)*m));		at[3] = _mm_set1_ps(*(A+j+(k+3)*m));		for( int i = 0; i < m/20*20; i+=20 ){		    float *ctemp = C+j*m+i;		    float* temp[3];		    temp[0] = A+i+k*m;		    temp[1] = A+i+(k+1)*m;		    *a = _mm_loadu_ps(temp[0]);		    *(a+1) = _mm_loadu_ps(temp[0]+4);		    *(a+2) = _mm_loadu_ps(temp[0]+8);		    *(a+3) = _mm_loadu_ps(temp[0]+12);		    *(a+4) = _mm_loadu_ps(temp[0]+16);		    *(a+5) = _mm_loadu_ps(temp[1]);		    *(a+6) = _mm_loadu_ps(temp[1]+4);		    *(a+7) = _mm_loadu_ps(temp[1]+8);		    *(a+8) = _mm_loadu_ps(temp[1]+12);		    *(a+9) = _mm_loadu_ps(temp[1]+16);            		    *c = _mm_loadu_ps(ctemp);		    *(c+1) = _mm_loadu_ps(ctemp+4);		    *(c+2) = _mm_loadu_ps(ctemp+8);		    *(c+3) = _mm_loadu_ps(ctemp+12);		    *(c+4) = _mm_loadu_ps(ctemp+16);		    *a = _mm_mul_ps(*a,at[0]);		    *(a+1) = _mm_mul_ps(*(a+1),at[0]);		    *(a+2) = _mm_mul_ps(*(a+2),at[0]);		    *(a+3) = _mm_mul_ps(*(a+3),at[0]);		    *(a+4) = _mm_mul_ps(*(a+4),at[0]);		    *(a+5) = _mm_mul_ps(*(a+5),at[1]);		    *(a+6) = _mm_mul_ps(*(a+6),at[1]);		    *(a+7) = _mm_mul_ps(*(a+7),at[1]);		    *(a+8) = _mm_mul_ps(*(a+8),at[1]);		    *(a+9) = _mm_mul_ps(*(a+9),at[1]);            		    *a = _mm_add_ps(*a,*c);		    *a = _mm_add_ps(*(a+5),*a);		    *(a+1) = _mm_add_ps(*(a+1),*(c+1));		    *(a+1) = _mm_add_ps(*(a+6),*(a+1));		    *(a+2) = _mm_add_ps(*(a+2),*(c+2));		    *(a+2) = _mm_add_ps(*(a+7),*(a+2));		    *(a+3) = _mm_add_ps(*(a+3),*(c+3));		    *(a+3) = _mm_add_ps(*(a+8),*(a+3));		    *(a+4) = _mm_add_ps(*(a+4),*(c+4));		    *(a+4) = _mm_add_ps(*(a+9),*(a+4));            		    _mm_storeu_ps(ctemp,*a);		    _mm_storeu_ps(ctemp+4,*(a+1));		    _mm_storeu_ps(ctemp+8,*(a+2));		    _mm_storeu_ps(ctemp+12,*(a+3));		    _mm_storeu_ps(ctemp+16,*(a+4));            		}        		for ( int i = m/20*20; i<m; i++){		    C[i+j*m] += A[i+k*m] * A[j+k*m];		    C[i+j*m] += A[i+(k+1)*m] * A[j+(k+1)*m];		}	    }	    for( int k = n/2*2; k < n; k++){		at[0] = _mm_set1_ps(*(A+j+k*m));		for( int i = 0; i < m/20*20; i+=20 ){		    float *ctemp = C+j*m+i;		    float *temp = A+i+k*m;		    *a = _mm_loadu_ps(temp);		    *(a+1) = _mm_loadu_ps(temp+4);		    *(a+2) = _mm_loadu_ps(temp+8);		    *(a+3) = _mm_loadu_ps(temp+12);		    *(a+4) = _mm_loadu_ps(temp+16);                		    *c = _mm_loadu_ps(ctemp);		    *(c+1) = _mm_loadu_ps(ctemp+4);		    *(c+2) = _mm_loadu_ps(ctemp+8);		    *(c+3) = _mm_loadu_ps(ctemp+12);		    *(c+4) = _mm_loadu_ps(ctemp+16);		    *a = _mm_mul_ps(*a,at[0]);		    *(a+1) = _mm_mul_ps(*(a+1),at[0]);		    *(a+2) = _mm_mul_ps(*(a+2),at[0]);		    *(a+3) = _mm_mul_ps(*(a+3),at[0]);		    *(a+4) = _mm_mul_ps(*(a+4),at[0]);                		    *a = _mm_add_ps(*a,*c);		    *(a+1) = _mm_add_ps(*(a+1),*(c+1));		    *(a+2) = _mm_add_ps(*(a+2),*(c+2));		    *(a+3) = _mm_add_ps(*(a+3),*(c+3));		    *(a+4) = _mm_add_ps(*(a+4),*(c+4));                		    _mm_storeu_ps(ctemp,*a);		    _mm_storeu_ps(ctemp+4,*(a+1));		    _mm_storeu_ps(ctemp+8,*(a+2));		    _mm_storeu_ps(ctemp+12,*(a+3));		    _mm_storeu_ps(ctemp+16,*(a+4));            		}            		for ( int i = m/20*20; i<m; i++){		    C[i+j*m] += A[i+k*m] * A[j+k*m];		}	    }	}    }}